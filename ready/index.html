<!doctype html>
<html>
  <head>
    <title>The window ready pattern</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <!-- add this script on top of every page -->
    <script>this.ready=new Promise($=>addEventListener('DOMContentLoaded',$,{once:!0}))</script>
    <script>
    // so that every other script after can simply use ready.then(...) to bootstrap
    ready.then(function () {
      document.body.textContent = 'ready';
    });
    </script>
  </head>
  <body></body>
</html>